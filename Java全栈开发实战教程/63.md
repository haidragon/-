# 用于方便查看回顾
# http://securitytech.cc/ 的免费文本教程

# [官网](securitytech.cc) 会长期更新工具、产品开发、产品开发教程、商业产品开发。视频教程。

# [本人介绍](http://securitytech.cc/about)

![公众号](https://github.com/haidragon/haidragon/blob/main/gzh.png)


### 1\. 为什么 API 测试工具如此重要？

  * **快速验证接口**：开发者在编写完接口后，无需编写前端代码即可快速发送请求、查看响应，进行调试和验证。
  * **功能测试**：验证 API 是否按照预期实现业务逻辑。
  * **集成测试**：测试多个 API 或服务之间的协同工作是否正常。
  * **回归测试**：在代码修改后，快速运行已有的测试用例，确保新改动没有破坏原有功能。
  * **文档生成**：许多工具能基于测试用例自动生成 API 文档，保持文档与代码同步。
  * **团队协作**：方便团队成员共享 API 定义、测试用例和测试结果，提高协作效率。
  * **自动化**：支持将测试用例集成到 CI/CD 流水线中，实现自动化测试。

-----

### 2\. Postman：API 开发与测试的瑞士军刀

**Postman** 是一款广受欢迎的 API 平台，它提供了一系列工具来简化 API 的开发、测试和文档管理。它最初是一个 Chrome 浏览器插件，现在已经发展成为一个功能齐全的桌面应用程序和 Web 平台。

#### 2.1 Postman 的主要特点：

  * **直观的用户界面 (GUI)**：操作简单，即使是初学者也能快速上手。
  * **请求构建器**：可以轻松构建各种类型的 HTTP 请求（GET、POST、PUT、DELETE 等），并设置请求头、查询参数、请求体（JSON、Form Data、Binary 等）、授权信息。
  * **响应查看器**：美观地展示 API 响应，支持 JSON、XML、HTML 等格式的语法高亮和格式化。
  * **集合 (Collections)**：将相关的 API 请求组织成集合，方便管理和共享。
  * **环境 (Environments)**：管理不同环境（开发、测试、生产）的变量，方便在不同环境之间切换，而无需修改请求的硬编码值。
  * **测试脚本**：可以在请求执行前 (Pre-request Script) 和请求执行后 (Tests) 编写 JavaScript 脚本，用于：
      * 动态生成请求数据。
      * 从响应中提取数据作为后续请求的变量。
      * 编写断言来验证响应结果（如状态码、响应体内容、响应头等）。
      * 进行简单的性能测试。
  * **变量管理**：支持环境变量、全局变量、集合变量和数据变量，极大提高了测试的灵活性。
  * **Mock 服务器**：可以创建模拟服务器来模拟 API 响应，无需等待后端开发完成即可进行前端联调和测试。
  * **API 文档生成**：基于集合中的请求和示例响应，可以自动生成 API 文档并发布。
  * **监控 (Monitors)**：定期运行集合中的请求，监控 API 的可用性和性能。
  * **团队协作**：支持工作区共享、团队成员协作、版本控制等功能（部分功能需要付费）。
  * **Newman**：Postman 的命令行运行器，允许在 CI/CD 环境中自动化运行 Postman 集合。

#### 2.2 Postman 的使用场景：

  * **API 调试**：日常开发中验证接口功能。
  * **接口测试**：编写自动化测试用例，验证接口的正确性。
  * **Mock 开发**：后端 API 未就绪时，为前端提供模拟数据。
  * **API 文档管理**：同步生成和更新 API 文档。
  * **团队协作与共享**：统一 API 接口定义和测试用例。

#### 2.3 Postman 简单示例：

1.  **新建请求**：在 Postman 中点击 `+` 号新建一个请求 Tab。
2.  **设置 URL 和方法**：
      * 例如：`GET https://jsonplaceholder.typicode.com/posts/1`
3.  **发送请求并查看响应**：点击 `Send` 按钮，在响应区查看返回的 JSON 数据。
4.  **编写测试脚本 (Tests Tab)**：
    ```javascript
    // 检查状态码是否为 200
    pm.test("Status code is 200", function () {
        pm.response.to.have.status(200);
    });

    // 检查响应体是否包含特定数据
    pm.test("Response body contains userId", function () {
        var jsonData = pm.response.json();
        pm.expect(jsonData.userId).to.eql(1);
    });

    // 检查响应头
    pm.test("Content-Type header is present", function () {
        pm.response.to.have.header("Content-Type");
    });

    // 将响应中的数据设置为环境变量
    pm.environment.set("postTitle", pm.response.json().title);
    ```
5.  **运行测试**：再次点击 `Send`，在响应区的 `Test Results` Tab 中查看测试结果。

-----

### 3\. Apifox：国产一体化 API 协作平台（主打“一站式”）

**Apifox** 是一款国产的 API 文档、API 调试、API Mock 和 API 自动化测试**一体化协作平台**。它致力于解决 API 全生命周期中的数据同步问题，将 API 设计、开发、测试、管理等环节整合在一个工具中。

#### 3.1 Apifox 的主要特点：

  * **All-in-One (一体化)**：这是 Apifox 最大的亮点。它将 API 文档、API 调试、API Mock、API 自动化测试集成在同一个平台。你只需要维护一套 API 数据，即可自动同步到各个功能模块。
      * **API 文档**：基于接口定义自动生成可交互的 API 文档，支持版本管理、多语言等。
      * **API 调试**：类似 Postman 的请求构建和响应查看功能。
      * **API Mock**：提供强大的 Mock 功能，支持更复杂的 Mock 规则（如基于数据结构的 Mock、条件 Mock、MockJS 语法等），无需编写代码。
      * **API 自动化测试**：提供可视化的测试用例编排、断言、参数化、场景测试等功能，支持流程自动化。
  * **数据模型管理**：可以定义复杂的数据模型（JSON Schema），用于请求体、响应体的校验和 Mock 数据的生成。
  * **可视化测试用例**：拖拽式或表格式创建测试步骤和断言，降低了编写自动化测试脚本的门槛。
  * **强大的 Mock 能力**：
      * 智能 Mock：根据接口定义和数据结构自动生成 Mock 数据。
      * 高级 Mock：支持 MockJS 语法、自定义响应、期望规则、请求头/参数匹配等。
  * **环境管理**：类似 Postman 的环境变量管理。
  * **团队协作**：提供项目、成员、权限管理，支持团队共享和协作。
  * **数据导入/导出**：支持导入 Swagger/OpenAPI、Postman、YApi 等格式的数据，方便迁移。
  * **CLI 命令行工具**：支持在 CI/CD 环境中运行自动化测试。
  * **数据库操作**：可以直接在测试用例中连接数据库，进行前置或后置的数据准备/清理。
  * **前置/后置脚本**：支持 JavaScript 脚本，用于复杂逻辑处理。

#### 3.2 Apifox 的使用场景：

  * **API 全生命周期管理**：从 API 设计（定义文档）开始，到开发（调试）、测试（自动化）、Mock 联调，都在一个平台完成。
  * **团队协作**：特别是需要前后端、测试人员紧密协作的团队。
  * **需求变化频繁的项目**：一套数据维护，所有相关功能自动更新。
  * **对 Mock 数据生成有复杂需求的项目**。
  * **希望降低自动化测试编写门槛的团队**。

#### 3.3 Apifox 简单示例：

1.  **新建项目和接口**：在 Apifox 中新建一个项目，然后定义一个接口，例如 `POST /user`，定义请求体（JSON Schema）和响应体（JSON Schema）。
2.  **自动生成文档**：接口定义完成后，API 文档已自动生成。
3.  **调试接口**：在调试 Tab，Apifox 会根据接口定义自动填充请求参数和请求体示例。可以直接发送请求。
4.  **Mock 接口**：在 Mock Tab，可以启用智能 Mock，或添加自定义 Mock 规则。前端可以立即根据 Mock 地址进行联调。
5.  **编写自动化测试**：
      * 在“自动化测试”Tab 下，新建测试用例。
      * 添加测试步骤，选择接口或编写自定义请求。
      * 设置断言（状态码、响应体字段值、JSON Schema 校验等），支持可视化配置。
      * 可以添加前置/后置脚本，甚至数据库操作步骤。
      * 保存并运行测试用例。

-----

### 4\. Postman 与 Apifox 对比总结

| 特性           | Postman                                          | Apifox                                                        |
| :------------- | :----------------------------------------------- | :------------------------------------------------------------ |
| **定位** | **API 客户端和测试工具** | **API 一体化协作平台** (设计、调试、Mock、测试、文档)           |
| **核心优势** | **广泛的用户基础**，功能全面，**灵活性高**，插件丰富 | **“All-in-One”**，数据同步，可视化测试，强大的 Mock，国产，中文友好 |
| **API 文档** | 需手动从 Collection 或 Spec 生成，管理相对独立 | **与接口定义高度集成**，自动生成和更新，所见即所得             |
| **API Mock** | 支持，但相对简单，需编写 JS 脚本或依赖第三方服务 | **强大且可视化**，支持 MockJS、期望规则，自动生成智能 Mock 数据 |
| **自动化测试** | 基于 JS 脚本，Newman CLI 运行，功能强大但需编码 | **可视化编排**，支持多种断言，场景测试，降低自动化测试门槛     |
| **数据同步** | 集合、环境、变量相对独立管理                       | **一套数据贯穿始终**，确保接口定义、文档、Mock、测试一致性     |
| **团队协作** | 支持工作区共享、版本控制 (部分付费)              | 功能完善的团队协作、权限管理，国产化服务                       |
| **学习曲线** | 简单易上手                                       | UI 友好，但功能多，需要一定时间熟悉各项模块                     |
| **适用范围** | **个人开发者**、追求灵活性的团队、已熟悉 Postman 的团队 | **前后端、测试团队协作紧密**、对 API 全生命周期管理有高要求的团队 |

-----

### 5\. 如何选择？

  * **如果你是个人开发者或小团队，且已经习惯了 Postman 的使用，或者更偏好脚本化的测试方式**：Postman 是一个非常好的选择。它功能强大，社区资源丰富，足以应对大部分 API 测试需求。

  * **如果你所在团队强调前后端、测试的紧密协作，希望将 API 的设计、开发、调试、测试、Mock、文档管理整合到一个平台，并追求数据的一致性和自动化程度**：**Apifox 绝对值得一试**。它在国产工具中表现出色，尤其在一体化和可视化方面具有显著优势，能够大幅提升团队效率。

实际上，许多团队会根据具体需求和团队偏好，在两者之间进行选择，或者根据具体场景互补使用。最重要的是选择一个能提高效率、促进协作的工具。